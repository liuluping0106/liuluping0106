!function(e){var n,t={},o="jinrishici-token";function i(){return document.getElementById("jinrishici-sentence")||0!=document.getElementsByClassName("jinrishici-sentence").length}function c(){t.load(function(e){var n=document.getElementById("jinrishici-sentence"),t=document.getElementsByClassName("jinrishici-sentence");if(n&&(n.innerText=e.data.content),0!==t.length){for(var o=0;o<t.length;o++){t[o].innerText=e.data.content}}})}function r(e,n){var t=new XMLHttpRequest;t.open("get",n),t.withCredentials=!0,t.send(),t.onreadystatechange=function(n){if(4===t.readyState){var o=JSON.parse(t.responseText);"success"===o.status?e(o):console.error("今日诗词API加载失败，错误原因："+o.errMessage)}}}t.load=function(n){return e.localStorage&&e.localStorage.getItem(o)?function(e,n){return r(e,"https://v2.jinrishici.com/one.json?client=browser-sdk/1.2&X-User-Token="+encodeURIComponent(n))}(n,e.localStorage.getItem(o)):function(n){return r(function(t){e.localStorage.setItem(o,t.token),n(t)},"https://v2.jinrishici.com/one.json?client=browser-sdk/1.2")}(n)},e.jinrishici=t,i()?c():(n=function(){i()&&c()},"loading"!=document.readyState?n():document.addEventListener?document.addEventListener("DOMContentLoaded",n):document.attachEvent("onreadystatechange",function(){"complete"==document.readyState&&n()}))}(window);$(function(){$("img.lazyload").lazyload({threshold:120})});var ele=document.getElementById("biiframe");if(ele){var hh=ele.offsetWidth*0.65;ele.height=hh}var ele=document.getElementById("pdfiframe");if(ele){var hh=Math.min(window.screen.availHeight*0.85,ele.offsetWidth*1.6);ele.height=hh}var ele=document.getElementById("epubiframe");if(ele){var hh=Math.min(window.screen.availHeight*0.85,ele.offsetWidth*1.6);ele.height=hh}var ele=document.getElementById("m3u8iframe");if(ele){var hh=ele.offsetWidth*9/16;ele.height=hh}var ele=document.getElementById("md5iframe");if(ele){ele.width=Math.min(ele.offsetWidth,1200);var hh=Math.min(ele.offsetWidth*0.65,700);ele.height=hh}function runtime(){X=new Date("07/08/2020 8:30:00");Y=new Date();T=(Y.getTime()-X.getTime());M=24*60*60*1000;a=T/M;A=Math.floor(a);b=(a-A)*24;B=Math.floor(b);c=(b-B)*60;C=Math.floor((b-B)*60);D=Math.floor((c-C)*60);spantime.innerHTML=A+"天"+B+"小时"+C+"分"+D+"秒"}setInterval(runtime,1000);if(document.getElementById("upper_ele")){new Viewer(document.getElementById("upper_ele"),{toolbar:false,})}function viewchange(){var ele=document.getElementById("la_20899205");allt=ele.firstChild;if(allt){alltin=allt.innerHTML;if(alltin){st=alltin.split("&nbsp;");allout=st[1].replace(",","");var tele=document.getElementById("laout");if(tele){tele.innerHTML=allout}}}}setInterval(viewchange,500);(function(){var config={itv:1800000,url1:"//ia.51.la/go1?id=20899205",ekc:""};!function(e){function t(r){if(n[r]){return n[r].exports}var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){function r(){var e=void 0,t=/id=(\d+)/.exec(config.url1)[1]||"";try{e=u.get("__tins__"+t)}catch(t){e=!1}var n=e&&i.isN(e.sid)&&i.isN(e.expires)&&g-e.sid<1800000?0:1,r=n?1:e.vd+1,o=n?g:e.sid,c=g+1800000;return u.set("__tins__"+t,s.stringify({sid:o,vd:r,expires:c}),null,"/"),[n,n?o:u.get("__tins__"+t).sid,r]}function o(){var e=s.parse(s.stringify(i.extend({},y,v))),t=i.obj2url(e),n=config.url1+"&rt="+g+"&"+t,r=new Image(1,1);r.src=n}var i=n(4),c=n(5),u=n(7).store,s=n(6),a=window,f=a.location,l=a.screen,p=a.navigator,g=i.now(),d=!0,m=r(),v={ekc:config.ekc,sid:m[1],tt:c.getMeta.tt,kw:c.getMeta.kw,cu:f.href,pu:c.getRef()},y={rl:l.width+"*"+l.height,lang:p.language||p.browserLanguage,ct:function(){var e=p.connection||p.mozConnection||p.webkitConnection||p.oConnection,t=i.hasIt(p.userAgent,"mobile")&&e?e.type:"unknow";return t}(),pf:function(){var e=d?1:0;return d=0,e}(),ins:m[0],vd:m[2],ce:p.cookieEnabled?1:0,cd:l.colorDepth||l.pixelDepth,ds:c.getMeta.ds};o.version="2.2.1.2",n(10)(y),o()},,,,function(e,t){function n(e,t){return void 0!==e&&e.indexOf(t)!==-1}function r(e){return function(t){return Object.prototype.toString.call(t)==="[object "+e+"]"}}function o(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n){t[r]=n[r]}}return t}function i(e){return e.replace(/&/g,"~_~")}function c(e){var t="";for(var n in e){""!==t&&(t+="&"),t+=n+"="+a(a(i(String(e[n]))))}return t}function u(e){return e.replace(/^\s+|\s+$/g,"")}function s(){return +new Date}var a=encodeURIComponent,f=r("Object"),l=r("Number"),p=r("String"),g=r("Array"),d=r("Function"),m=r("RegExp");e.exports={isO:f,isN:l,isF:d,isR:m,isS:p,isA:g,hasIt:n,extend:o,obj2url:c,trim:u,now:s}},function(e,t,n){function r(e){return u.getElementsByTagName(e.toLowerCase())}function o(){var e="";try{e=c.top.document.referrer}catch(t){if(c.parent){try{e=c.parent.document.referrer}catch(t){e=""}}}return""===e&&(e=u.referrer),e}var i=n(4),c=window,u=c.document,s=function(){var e=r("meta"),t=r("title"),n={kw:"",ds:""},o=void 0;n.tt=i.trim(t.length?t[0].innerHTML:"");
for(var c=0;c<e.length;c++){e[c].name&&(o=e[c].name.toLowerCase(),i.hasIt("keywords",o)&&(n.kw=e[c].content.slice(0,100)),i.hasIt("description",o)&&(n.ds=e[c].content.slice(0,30)))}return n}();e.exports={getMeta:s,getRef:o}},function(module,exports){var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};module.exports={parse:function parse(sJSON){return eval("("+sJSON+")")},stringify:function(){function e(o){if(null==o){return"null"}if("number"==typeof o){return isFinite(o)?o.toString():"null"}if("boolean"==typeof o){return o.toString()}if("object"===("undefined"==typeof o?"undefined":_typeof(o))){if("function"==typeof o.toJSON){return e(o.toJSON())}if(r(o)){for(var u="[",s=0;s<o.length;s++){u+=(s?", ":"")+e(o[s])}return u+"]"}if("[object Object]"===t.call(o)){var a=[];for(var f in o){n.call(o,f)&&a.push(e(f)+": "+e(o[f]))}return"{"+a.join(", ")+"}"}}return'"'+o.toString().replace(c,i)+'"'}var t=Object.prototype.toString,n=Object.prototype.hasOwnProperty,r=Array.isArray||function(e){return"[object Array]"===t.call(e)},o={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"},i=function(e){return o[e]||"\\u"+(e.charCodeAt(0)+65536).toString(16).substr(1)},c=/[\\"\u0000-\u001F\u2028\u2029]/g;return e}()}},function(e,t,n){var r=n(5),o=n(6),i={get:function(e){return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[-.+*]/g,"\\$&")+"\\s*\\=s*([^;]*).*$)|^.*$"),"$1"))||null},set:function(e,t,n,r,o,i){if(!e||/^(?:expires|max-age|path|domain|secure)$/i.test(e)){return !1}var c="";if(n){switch(n.constructor){case Number:c=n===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+n;break;case String:c="; expires="+n;break;case Date:c="; expires="+n.toUTCString()}}return document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+c+(o?"; domain="+o:"")+(r?"; path="+r:"")+(i?"; secure":""),!0}},c={get:function(e){return o.parse((r.isMobi?window.localStorage.getItem(e):i.get(e))||"{}")},set:function(e,t,n,o){return r.isMobi?window.localStorage.setItem(e,t):i.set(e,t,n,o)}};e.exports={cookie:i,store:c}},,,function(e,t,n){var r=n(4),o=n(7);e.exports=function(e){var t=o.store.get("__51laig__");t=r.isN(t)?parseInt(t)+1:1,o.cookie.set("__51cke__",config.ekc,null,"/"),e.ing=t,o.store.set("__51laig__",t,null,"/")}}])}());var _paq=window._paq=window._paq||[];_paq.push(["trackPageView"]);_paq.push(["enableLinkTracking"]);(function(){var u="//analytic.liulp.club/";_paq.push(["setTrackerUrl",u+"matomo.php"]);_paq.push(["setSiteId","1"]);var d=document,g=d.createElement("script"),s=d.getElementsByTagName("script")[0];g.type="text/javascript";g.async=true;g.src=u+"matomo.js";s.parentNode.insertBefore(g,s)})();var searchBtn=document.querySelector(".search-start");var searchClear=document.querySelector(".search-clear");var searchInput=document.querySelector(".search-input");var searchResults=document.querySelector(".search-results");var searchValue="",arrItems=[],arrContents=[],arrLinks=[],arrTitles=[],arrResults=[],indexItem=[],itemLength=0;var tmpDiv=document.createElement("div");tmpDiv.className="result-item";var xhr=new XMLHttpRequest()||new ActiveXObject("Microsoft.XMLHTTP");xhr.onreadystatechange=function(){if(xhr.readyState==4&&xhr.status==200){xml=xhr.responseXML;arrItems=xml.getElementsByTagName("item");itemLength=arrItems.length;for(i=0;i<itemLength;i++){arrContents[i]=arrItems[i].getElementsByTagName("description")[0].childNodes[0].nodeValue.replace(/<.*?>/g,"").replace(/\$\\\S+\$/g,"");arrLinks[i]=arrItems[i].getElementsByTagName("link")[0].childNodes[0].nodeValue.replace(/<.*?>/g,"");arrTitles[i]=arrItems[i].getElementsByTagName("title")[0].childNodes[0].nodeValue.replace(/<.*?>/g,"")}}};xhr.open("get","/post/index.xml",true);xhr.send();searchBtn.onclick=function(){searchInput.style.display="block";searchClear.style.display="block";searchBtn.style.display="none"};searchClear.onclick=function(){searchInput.value="";searchResults.innerHTML="";searchResults.style.display="none";searchClear.style.display="none";searchInput.style.display="none";searchBtn.style.display="block"};var windowWidth=$(window).width();searchInput.oninput=function(){setTimeout(searchConfirm,0)};searchInput.onfocus=function(){searchResults.style.display="block"};function searchConfirm(){if(searchInput.value==""){searchResults.style.display="none"}else{if(searchInput.value.search(/^\s+$/)>=0){searchInit();var itemDiv=tmpDiv.cloneNode(true);itemDiv.innerText="请输入有效内容...";searchResults.appendChild(itemDiv)}else{searchInit();searchValue=searchInput.value;searchMatching(arrTitles,arrContents,searchValue)}}}function searchInit(){arrResults=[];indexItem=[];searchResults.innerHTML="";searchResults.style.display="block";searchClear.style.display="block"}function searchMatching(arr1,arr2,input){input=new RegExp(input,"i");
for(i=0;i<itemLength;i++){if(arr1[i].search(input)!==-1||arr2[i].search(input)!==-1){if(arr1[i].search(input)!==-1){var arr=arr1}else{var arr=arr2}indexItem.push(i);var indexContent=arr[i].search(input);var l=input.toString().length-3;var step=10;arrResults.push(arr[i].slice(indexContent-step,indexContent)+"<mark>"+arr[i].slice(indexContent,indexContent+l)+"</mark>"+arr[i].slice(indexContent+l,indexContent+l+step))}}var totalDiv=tmpDiv.cloneNode(true);totalDiv.innerHTML="匹配：<b>"+indexItem.length+"</b> 项";searchResults.appendChild(totalDiv);if(indexItem.length==0){var itemDiv=tmpDiv.cloneNode(true);itemDiv.innerText="未匹配到内容...";searchResults.appendChild(itemDiv)}for(i=0;i<arrResults.length;i++){var itemDiv=tmpDiv.cloneNode(true);itemDiv.innerHTML="<b>"+arrTitles[indexItem[i]]+"</b><br>"+arrResults[i];itemDiv.setAttribute("onclick","changeHref(arrLinks[indexItem["+i+"]])");searchResults.appendChild(itemDiv)}}function changeHref(href){location.href=href};