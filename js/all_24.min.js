!function(e){var n,t={},o="jinrishici-token";function i(){return document.getElementById("jinrishici-sentence")||0!=document.getElementsByClassName("jinrishici-sentence").length}function c(){t.load(function(e){var n=document.getElementById("jinrishici-sentence"),t=document.getElementsByClassName("jinrishici-sentence");if(n&&(n.innerText=e.data.content),0!==t.length){for(var o=0;o<t.length;o++){t[o].innerText=e.data.content}}})}function r(e,n){var t=new XMLHttpRequest;t.open("get",n),t.withCredentials=!0,t.send(),t.onreadystatechange=function(n){if(4===t.readyState){var o=JSON.parse(t.responseText);"success"===o.status?e(o):console.error("今日诗词API加载失败，错误原因："+o.errMessage)}}}t.load=function(n){return e.localStorage&&e.localStorage.getItem(o)?function(e,n){return r(e,"https://v2.jinrishici.com/one.json?client=browser-sdk/1.2&X-User-Token="+encodeURIComponent(n))}(n,e.localStorage.getItem(o)):function(n){return r(function(t){e.localStorage.setItem(o,t.token),n(t)},"https://v2.jinrishici.com/one.json?client=browser-sdk/1.2")}(n)},e.jinrishici=t,i()?c():(n=function(){i()&&c()},"loading"!=document.readyState?n():document.addEventListener?document.addEventListener("DOMContentLoaded",n):document.attachEvent("onreadystatechange",function(){"complete"==document.readyState&&n()}))}(window);$(function(){$("img.lazyload").lazyload({threshold:100})});var ele=document.getElementById("biiframe");if(ele){var hh=ele.offsetWidth*0.65;ele.height=hh}var ele=document.getElementById("pdfiframe");if(ele){var hh=Math.min(window.screen.availHeight*0.85,ele.offsetWidth*1.6);ele.height=hh}var ele=document.getElementById("epubiframe");if(ele){var hh=Math.min(window.screen.availHeight*0.85,ele.offsetWidth*1.6);ele.height=hh}var ele=document.getElementById("m3u8iframe");if(ele){var hh=ele.offsetWidth*9/16;ele.height=hh}var ele=document.getElementById("md5iframe");if(ele){ele.width=Math.min(ele.offsetWidth,1200);var hh=Math.min(ele.offsetWidth*0.65,700);ele.height=hh}function runtime(){X=new Date("07/08/2020 8:30:00");Y=new Date();T=(Y.getTime()-X.getTime());M=24*60*60*1000;a=T/M;A=Math.floor(a);b=(a-A)*24;B=Math.floor(b);c=(b-B)*60;C=Math.floor((b-B)*60);D=Math.floor((c-C)*60);spantime.innerHTML=A+"天"+B+"时"+C+"分"+D+"秒"}setInterval(runtime,1000);if(document.getElementById("upper_ele")){new Viewer(document.getElementById("upper_ele"),{toolbar:false,})}var _paq=window._paq=window._paq||[];_paq.push(["trackPageView"]);_paq.push(["enableLinkTracking"]);(function(){var u="//analytic.liulp.club/";_paq.push(["setTrackerUrl",u+"matomo.php"]);_paq.push(["setSiteId","1"]);var d=document,g=d.createElement("script"),s=d.getElementsByTagName("script")[0];g.type="text/javascript";g.async=true;g.src=u+"matomo.js";s.parentNode.insertBefore(g,s)})();var searchBtn=document.querySelector(".search-start");var searchClear=document.querySelector(".search-clear");var searchInput=document.querySelector(".search-input");var searchResults=document.querySelector(".search-results");var searchValue="",arrItems=[],arrContents=[],arrLinks=[],arrTitles=[],arrResults=[],indexItem=[],itemLength=0;var tmpDiv=document.createElement("div");tmpDiv.className="result-item";var xhr=new XMLHttpRequest()||new ActiveXObject("Microsoft.XMLHTTP");xhr.onreadystatechange=function(){if(xhr.readyState==4&&xhr.status==200){xml=xhr.responseXML;arrItems=xml.getElementsByTagName("item");itemLength=arrItems.length;for(i=0;i<itemLength;i++){arrContents[i]=arrItems[i].getElementsByTagName("description")[0].childNodes[0].nodeValue.replace(/<.*?>/g,"").replace(/\$\\\S+\$/g,"");arrLinks[i]=arrItems[i].getElementsByTagName("link")[0].childNodes[0].nodeValue.replace(/<.*?>/g,"");arrTitles[i]=arrItems[i].getElementsByTagName("title")[0].childNodes[0].nodeValue.replace(/<.*?>/g,"")}}};xhr.open("get","/post/index.xml",true);xhr.send();searchBtn.onclick=function(){searchInput.style.display="block";searchClear.style.display="block";searchBtn.style.display="none"};searchClear.onclick=function(){searchInput.value="";searchResults.innerHTML="";searchResults.style.display="none";searchClear.style.display="none";searchInput.style.display="none";searchBtn.style.display="block"};var windowWidth=$(window).width();searchInput.oninput=function(){setTimeout(searchConfirm,0)};searchInput.onfocus=function(){searchResults.style.display="block"};function searchConfirm(){if(searchInput.value==""){searchResults.style.display="none"}else{if(searchInput.value.search(/^\s+$/)>=0){searchInit();var itemDiv=tmpDiv.cloneNode(true);itemDiv.innerText="请输入有效内容...";searchResults.appendChild(itemDiv)}else{searchInit();searchValue=searchInput.value;searchMatching(arrTitles,arrContents,searchValue)}}}function searchInit(){arrResults=[];indexItem=[];searchResults.innerHTML="";searchResults.style.display="block";searchClear.style.display="block"}function searchMatching(arr1,arr2,input){input=new RegExp(input,"i");for(i=0;i<itemLength;i++){if(arr1[i].search(input)!==-1||arr2[i].search(input)!==-1){if(arr1[i].search(input)!==-1){var arr=arr1
}else{var arr=arr2}indexItem.push(i);var indexContent=arr[i].search(input);var l=input.toString().length-3;var step=10;arrResults.push(arr[i].slice(indexContent-step,indexContent)+"<mark>"+arr[i].slice(indexContent,indexContent+l)+"</mark>"+arr[i].slice(indexContent+l,indexContent+l+step))}}var totalDiv=tmpDiv.cloneNode(true);totalDiv.innerHTML="匹配：<b>"+indexItem.length+"</b> 项";searchResults.appendChild(totalDiv);if(indexItem.length==0){var itemDiv=tmpDiv.cloneNode(true);itemDiv.innerText="未匹配到内容...";searchResults.appendChild(itemDiv)}for(i=0;i<arrResults.length;i++){var itemDiv=tmpDiv.cloneNode(true);itemDiv.innerHTML="<b>"+arrTitles[indexItem[i]]+"</b><br>"+arrResults[i];itemDiv.setAttribute("onclick","changeHref(arrLinks[indexItem["+i+"]])");searchResults.appendChild(itemDiv)}}function changeHref(href){location.href=href};